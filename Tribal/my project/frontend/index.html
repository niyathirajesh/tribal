<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book a Meeting with the King</title>
<style>
  body { font-family: Arial; padding: 20px; }
  form { max-width: 400px; margin: auto; display: flex; flex-direction: column; gap: 10px; }
  input, textarea, button { padding: 8px; font-size: 16px; }
  button { cursor: pointer; }
</style>
</head>
<body>

<h2>Book a Meeting with the King</h2>

<form id="bookingForm">
  <input type="text" id="fullName" placeholder="Full Name" required />
  <input type="email" id="email" placeholder="Email" required />
  <input type="date" id="bookingDate" required />
  <input type="time" id="time" required />
  <textarea id="reason" placeholder="Reason" required></textarea>
  <button type="submit">Book</button>
</form>

<script>
document.getElementById("bookingForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const bookingData = {
    name: document.getElementById("fullName").value,
    email: document.getElementById("email").value,
    date: document.getElementById("bookingDate").value,
    time: document.getElementById("time").value,
    reason: document.getElementById("reason").value
  };

  try {
    const res = await fetch("/api/booking", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(bookingData)
    });
    const data = await res.json();
    if (res.ok) {
      alert(data.message);
      document.getElementById("bookingForm").reset();
    } else {
      alert("Booking failed: " + data.error);
    }
  } catch (err) {
    console.error(err);
    alert("Booking failed! Check console.");
  }
});
</script>

</body>
</html>
